!function(e){var t={};function i(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)i.d(n,l,function(t){return e[t]}.bind(null,l));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t){var i=null,n=0,l=0,r=0,o=0,a=0,c=0,f=0,s=[],u={x:0,y:0,click:null},d={difficulty:"easy",screen:"menu",newBest:!1,timeTaken:0,tileW:20,tileH:20},h={easy:{name:"Easy",width:10,height:10,mines:10,bestTime:0,menuBox:[0,0]},medium:{name:"Medium",width:12,height:12,mines:20,bestTime:0,menuBox:[0,0]},hard:{name:"Hard",width:15,height:15,mines:50,bestTime:0,menuBox:[0,0]}};function m(e,t){this.x=e,this.y=t,this.hasMine=!1,this.danger=0,this.currentState="hidden"}function g(e){d.newBest=!1,d.timeTaken=0,d.difficulty=e,d.screen="playing",n=0,l=0,s.length=0;var t=h[e];c=Math.floor((document.getElementById("game").clientWidth-t.width*d.tileW)/2),f=Math.floor((document.getElementById("game").clientHeight-t.height*d.tileH)/2);for(var i=0;i<t.height;i++)for(var r=0;r<t.width;r++){var o=i*t.width+r;s.push(new m(r,i))}for(var a=0;a<t.mines;){o=Math.floor(Math.random()*s.length);s[o].hasMine||(s[o].hasMine=!0,a++)}for(var u in s)s[u].calcDanger()}function y(){if(null!=i){var e=Date.now();0==l&&(l=e),n+=e-l,function(){if("menu"==d.screen){if(null!=u.click){for(var e in h)if(u.y>=h[e].menuBox[0]&&u.y<=h[e].menuBox[1]){g(e);break}u.click=null}}else if("won"==d.screen||"lost"==d.screen)null!=u.click&&(d.screen="menu",u.click=null);else if(null!=u.click){var t=h[d.difficulty];if(u.click[0]>=c&&u.click[1]>=f&&u.click[0]<c+t.width*d.tileW&&u.click[1]<f+t.height*d.tileH){var i=[Math.floor((u.click[0]-c)/d.tileW),Math.floor((u.click[1]-f)/d.tileH)];1==u.click[2]?s[i[1]*t.width+i[0]].click():s[i[1]*t.width+i[0]].flag()}else u.click[1]>=380&&(d.screen="menu");u.click=null}}();var t=Math.floor(Date.now()/1e3);t!=r?(r=t,a=o,o=1):o++,i.fillStyle="#ddddee",i.fillRect(0,0,300,400),"menu"==d.screen?function(){i.textAlign="center",i.font="bold 20pt sans-serif",i.fillStyle="#000000";var e=100;for(var t in h){var n=u.y>=e-20&&u.y<=e+10;n&&(i.fillStyle="#000099"),h[t].menuBox=[e-20,e+10],i.fillText(h[t].name,150,e),e+=80,n&&(i.fillStyle="#000000")}for(var t in e=120,i.font="italic 12pt sans-serif",h){if(0==h[t].bestTime)i.fillText("No best time",150,e);else{var l=h[t].bestTime,r="";l/1e3>=60&&(r=Math.floor(l/1e3/60)+":",l%=6e4),r+=Math.floor(l/1e3)+"."+l%1e3,i.fillText("Best time   "+r,150,e)}e+=80}}():function(){var e=d.tileW/2,t=d.tileH/2,l=h[d.difficulty];if(i.textAlign="center",i.textBaseline="bottom",i.fillStyle="#000000",i.font="12px sans-serif",i.fillText(l.name,150,20),i.fillText("Return to menu",150,390),"lost"!=d.screen){i.textAlign="left",i.fillText("Mines: "+l.mines,10,40);var r="won"==d.screen?d.timeTaken:n,o="";n/1e3>60&&(o=Math.floor(r/1e3/60)+":");var a=Math.floor(r/1e3%60);o+=a>9?a:"0"+a,i.textAlign="right",i.fillText("Time: "+o,290,40)}for(var u in"lost"!=d.screen&&"won"!=d.screen||(i.textAlign="center",i.font="bold 20px sans-serif",i.fillText("lost"==d.screen?"Game Over":"Cleared!",150,f-15)),i.strokeStyle="#999999",i.strokeRect(c,f,l.width*d.tileW,l.height*d.tileH),i.font="bold 10px monospace",i.textAlign="center",i.textBaseline="middle",s){var m=c+s[u].x*d.tileW,g=f+s[u].y*d.tileH;"lost"==d.screen&&s[u].hasMine?(i.fillStyle="#ff0000",i.fillRect(m,g,d.tileW,d.tileH),i.fillStyle="#000000",i.fillText("x",m+e,g+t)):"visible"==s[u].currentState?(i.fillStyle="#dddddd",s[u].danger&&(i.fillStyle="#000000",i.fillText(s[u].danger,m+e,g+t))):(i.fillStyle="#cccccc",i.fillRect(m,g,d.tileW,d.tileH),i.strokeRect(m,g,d.tileW,d.tileH),"flagged"==s[u].currentState&&(i.fillStyle="#0000cc",i.fillText("P",m+e,g+t)))}}(),i.textAlign="left",i.font="10pt sans-serif",i.fillStyle="#000000",i.fillText("Frames: "+a,5,15),l=e,requestAnimationFrame(y)}}function v(e,t){var i=document.getElementById("game");do{e-=i.offsetLeft,t-=i.offsetTop,i=i.offsetParent}while(null!=i);return[e,t]}m.prototype.calcDanger=function(){for(var e=h[d.difficulty],t=this.y-1;t<=this.y+1;t++)for(var i=this.x-1;i<=this.x+1;i++)i==this.x&&t==this.y||i<0||t<0||i>=e.width||t>=e.height||s[t*e.width+i].hasMine&&this.danger++},m.prototype.flag=function(){"hidden"==this.currentState?this.currentState="flagged":"flagged"==this.currentState&&(this.currentState="hidden")},m.prototype.click=function(){"hidden"==this.currentState&&(this.hasMine?d.screen="lost":this.danger>0?this.currentState="visible":(this.currentState="visible",this.revealNeighbours()),function(){for(var e in s)if(0==s[e].hasMine&&"visible"!=s[e].currentState)return;d.timeTaken=n;var t=h[d.difficulty];(0==t.bestTime||n<t.bestTime)&&(d.newBest=!0,t.bestTime=n);d.screen="won"}())},m.prototype.revealNeighbours=function(){for(var e=h[d.difficulty],t=this.y-1;t<=this.y+1;t++)for(var i=this.x-1;i<=this.x+1;i++)if((i!=this.x||t!=this.y)&&!(i<0||t<0||i>=e.width||t>=e.height)){var n=t*e.width+i;"hidden"==s[n].currentState&&(s[n].currentState="visible",0==s[n].danger&&s[n].revealNeighbours())}},window.onload=function(){i=document.getElementById("game").getContext("2d"),document.getElementById("game").addEventListener("click",function(e){var t=v(e.pageX,e.pageY);u.click=[t[0],t[1],1]}),document.getElementById("game").addEventListener("mousemove",function(e){var t=v(e.pageX,e.pageY);u.x=t[0],u.y=t[1]}),document.getElementById("game").addEventListener("contextmenu",function(e){e.preventDefault();var t=v(e.pageX,e.pageY);return u.click=[t[0],t[1],2],!1}),requestAnimationFrame(y)}}]);